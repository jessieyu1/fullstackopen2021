{"version":3,"sources":["services/persons.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["baseUrl","exportObject","getAll","axios","get","then","response","data","create","newPerson","post","remove","id","delete","update","put","Persons","persons","handleRemoveName","map","person","name","number","onClick","Filter","props","text","value","onChange","PersonForm","onSubmit","text1","value1","onChange1","text2","value2","onChange2","type","text3","Notification","message","className","Error","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","newMessage","setNewMesssage","errorMessage","setErrorMesssage","useEffect","personService","initialPerosns","console","log","length","personToShow","filter","toLowerCase","includes","event","target","preventDefault","every","createdPerson","concat","setTimeout","catch","error","window","confirm","find","changedNumber","returnedPerson","p","alert","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9e105be8.chunk.js","sourcesContent":["import axios from 'axios'\n\n\nconst baseUrl = 'api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newPerson => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => response.data)\n}\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\nconst update = (id, newPerson) => {\n    const request = axios.put(`${baseUrl}/${id}`, newPerson)\n    return request.then(response => response.data)\n}\nconst exportObject = {\n    getAll: getAll,\n    create: create,\n    remove: remove,\n    update: update\n};\n\n\nexport default exportObject","import React from 'react'\n\n\nconst Persons = ({persons, handleRemoveName}) => {\n\n    return (\n        <div>\n        {persons.map(person =>\n            <p key={person.id}>{person.name} {person.number}\n                <button onClick={() => handleRemoveName(person)}>delete</button></p> \n        )}\n        </div>\n        )\n}  \n\n\nexport default Persons","import React from 'react'\n\nconst Filter = (props) =>{\n    return( \n        <div>{props.text}<input value={props.value} onChange={props.onChange}/>\n\n        </div>\n)}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = (props) =>{\n    return( \n        <form onSubmit={props.onSubmit}>\n            <div>\n                {props.text1}:<input value={props.value1} onChange={props.onChange1}/>\n            </div>\n            <div>\n                {props.text2}:<input value={props.value2} onChange={props.onChange2}/>\n            </div>\n            <div>\n                <button type={props.type}>\n                    {props.text3}\n                </button>\n            </div>\n        </form>\n)}\n\nexport default PersonForm","const Notification = ({message}) => {\n    if (message === null){\n        return null\n    }\n    return(\n        <div className='newMessage'>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification","const Error = ({message}) => {\n    if (message === null){\n        return null\n    }\n    return(\n        <div className='error'>\n            {message}\n        </div>\n    )\n}\n\nexport default Error","import React, { useState, useEffect } from \"react\";\nimport personService from \"./services/persons\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Notification from \"./components/Notification\";\nimport Error from \"./components/Error\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [newMessage, setNewMesssage] = useState(null);\n  const [errorMessage, setErrorMesssage] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then((initialPerosns) => {\n      setPersons(initialPerosns);\n    });\n  }, []);\n  console.log(\"render\", persons.length, \"persons\");\n\n  const addName = (event) => {\n    event.preventDefault();\n    if (persons.every((person) => person.name !== newName)) {\n      const newPerson = {\n        name: newName,\n        number: newNumber,\n      };\n      personService\n      .create(newPerson)\n      .then((createdPerson) => {\n        setPersons(persons.concat(createdPerson));\n        setNewName(\"\");\n        setNewNumber(\"\");\n        setNewMesssage(`Added ${newName}`);\n        setTimeout(() => {\n          setNewMesssage(null);\n        }, 3000);\n      })\n      .catch((error) => {\n        setErrorMesssage(`${error.response.data.error}`);\n        setTimeout(() => {\n          setErrorMesssage(null);\n        }, 3000);\n      })\n    } else {\n      if (persons.every((person) => person.number !== newNumber)) {\n        if (\n          window.confirm(\n            `${newName} is already added to phonebook, replace the old number with a new one?`\n          )\n        ) {\n          const newPerson = persons.find((person) => person.name === newName);\n          const changedNumber = { ...newPerson, number: newNumber };\n\n          personService\n            .update(newPerson.id, changedNumber)\n            .then((returnedPerson) => {\n              setPersons(\n                persons.map((p) => (p.id !== newPerson.id ? p : returnedPerson))\n              );\n              setTimeout(() => {\n                setNewMesssage(`Changed ${newName}'s number`);\n              }, 3000);\n            })\n            .catch((error) => {\n              setErrorMesssage(\n                `Error!`\n              );\n              setTimeout(() => {\n                setErrorMesssage(null);\n              }, 5000);\n              setPersons(persons.filter((p) => p.id !== newPerson.id));\n            });\n        }\n      } else {\n        window.alert(`${newName} is already added to phonebook`);\n      }\n    }\n  };\n\n  const handleRemoveName = (person) => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n      personService\n        .remove(person.id)\n        .then(setPersons(persons.filter((p) => p.id !== person.id)));\n        setTimeout(() => {\n          setNewMesssage(`Information of ${newName} has been removed from server`);\n        }, 3000);\n    }\n  };\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value);\n  };\n  const personToShow = persons.filter((person) =>\n    person.name.toLowerCase().includes(newFilter.toLowerCase())\n  );\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={newMessage} />\n      <Error message={errorMessage} />\n      <div>\n        <Filter\n          value={newFilter}\n          onChange={handleFilterChange}\n          text=\"Filter shown with\"\n        />\n      </div>\n      <h3>Add a new</h3>\n      <PersonForm\n        onSubmit={addName}\n        text1=\"name\"\n        value1={newName}\n        onChange1={handleNameChange}\n        text2=\"number\"\n        value2={newNumber}\n        onChange2={handleNumberChange}\n        text3=\"add\"\n        type=\"submit\"\n      />\n      <h3>Numbers</h3>\n      <Persons persons={personToShow} handleRemoveName={handleRemoveName} />\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\n\nReactDOM.render(\n  <App  />,\n  document.getElementById('root')\n)"],"sourceRoot":""}