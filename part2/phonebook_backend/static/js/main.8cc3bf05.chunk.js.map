{"version":3,"sources":["services/persons.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","components/Error.js","App.js","index.js"],"names":["baseUrl","exportObject","getAll","axios","get","then","response","data","create","newPerson","post","remove","id","delete","update","request","put","nonExisting","name","number","concat","Persons","persons","handleRemoveName","map","person","onClick","Filter","props","text","value","onChange","PersonForm","onSubmit","text1","value1","onChange1","text2","value2","onChange2","type","text3","Notification","message","className","Error","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","newFilter","setNewFilter","newMessage","setNewMesssage","errorMessage","setErrorMesssage","useEffect","personService","initialPerosns","console","log","length","personToShow","filter","toLowerCase","includes","event","target","preventDefault","every","returnedPerson","setTimeout","window","confirm","find","changedNumber","p","catch","error","alert","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8cc3bf05.chunk.js","sourcesContent":["import axios from 'axios'\n\n\nconst baseUrl = 'http://localhost:3001/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = newPerson => {\n    const request = axios.post(baseUrl, newPerson)\n    return request.then(response => response.data)\n}\nconst remove = (id) => {\n    const request = axios.delete(`${baseUrl}/${id}`)\n    return request.then(response => response.data)\n}\nconst update = (id, newPerson) => {\n    const request = axios.put(`${baseUrl}/${id}`, newPerson)\n    const nonExisting = {\n        id: 10000,\n        name: 'The information has been removed.',\n        number: '000'\n    }\n    return request.then(response => response.data.concat(nonExisting))\n}\nconst exportObject = {\n    getAll: getAll,\n    create: create,\n    remove: remove,\n    update: update\n};\n\n\nexport default exportObject","import React from 'react'\n\n\nconst Persons = ({persons, handleRemoveName}) => {\n\n    return (\n        <div>\n        {persons.map(person =>\n            <p key={person.id}>{person.name} {person.number}\n                <button onClick={() => handleRemoveName(person)}>delete</button></p> \n        )}\n        </div>\n        )\n}  \n\n\nexport default Persons","import React from 'react'\n\nconst Filter = (props) =>{\n    return( \n        <div>{props.text}<input value={props.value} onChange={props.onChange}/>\n\n        </div>\n)}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = (props) =>{\n    return( \n        <form onSubmit={props.onSubmit}>\n            <div>\n                {props.text1}:<input value={props.value1} onChange={props.onChange1}/>\n            </div>\n            <div>\n                {props.text2}:<input value={props.value2} onChange={props.onChange2}/>\n            </div>\n            <div>\n                <button type={props.type}>\n                    {props.text3}\n                </button>\n            </div>\n        </form>\n)}\n\nexport default PersonForm","const Notification = ({message}) => {\n    if (message === null){\n        return null\n    }\n    return(\n        <div className='newMessage'>\n            {message}\n        </div>\n    )\n}\n\nexport default Notification","const Error = ({message}) => {\n    if (message === null){\n        return null\n    }\n    return(\n        <div className='error'>\n            {message}\n        </div>\n    )\n}\n\nexport default Error","import React, { useState, useEffect } from 'react'\nimport personService from './services/persons'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Notification from './components/Notification'\nimport Error from './components/Error'\n\nconst App = () => {\n  const [ persons, setPersons ] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ newFilter, setNewFilter] = useState('')\n  const [newMessage,setNewMesssage] = useState(null)\n  const [errorMessage,setErrorMesssage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(initialPerosns =>{\n        setPersons(initialPerosns)\n      })\n  },[])\n  console.log('render', persons.length, 'persons')\n  \n  const addName = (event) => {\n    event.preventDefault()\n    if (persons.every(person => person.name !== newName )) {\n        const newPerson = {\n              name: newName,\n              number:newNumber\n              }\n        personService\n            .create(newPerson)\n            .then(returnedPerson =>{\n              setPersons(persons.concat(returnedPerson))\n              setNewName('')\n              setNewNumber('')\n              setNewMesssage(`Added ${newName}`)\n              setTimeout(() => {\n                setNewMesssage(null)\n              }, 3000);\n            })\n    }else{\n      if (persons.every(person => person.number !== newNumber)) {\n        if(window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)){\n          const newPerson = persons.find(person => person.name === newName)\n          const changedNumber = {...newPerson,number:newNumber}\n          personService\n          .update(newPerson.id,changedNumber)\n            .then(returnedPerson=> {\n              setPersons(persons.map(p=> p.id !== newPerson.id ? p : returnedPerson))\n              setNewMesssage(`Changed ${newName}'s number`)\n              setTimeout(() => {\n                setNewMesssage(null)\n              }, 3000)\n              })\n            .catch(error => {\n                setErrorMesssage(\n                  `Information of ${newName} has been removed from server`\n                )\n                setTimeout(() => {\n                  setErrorMesssage(null) \n                }, 5000)\n                setPersons(persons.filter(p => p.id !== newPerson.id))\n        })\n      }\n    }\n      else \n      {\n        window.alert(`${newName} is already added to phonebook`)\n      }\n    }\n  }\n\n  const handleRemoveName = person => {\n    if (window.confirm(`Delete ${person.name}?`)) {\n        personService\n        .remove(person.id)\n        .then(setPersons(persons.filter(p => p.id !== person.id))\n      )\n    }\n}\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n  const handleFilterChange = (event) => {\n    setNewFilter(event.target.value)\n  }\n  const personToShow = persons.filter(person => person.name.toLowerCase().includes(newFilter.toLowerCase()))\n\n\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={newMessage} />\n      <Error message={errorMessage} />\n      <div>\n        <Filter value={newFilter} onChange={handleFilterChange} text='Filter shown with' />\n      </div>\n      <h3>Add a new</h3>\n      <PersonForm onSubmit={addName} \n                  text1='name' \n                  value1={newName} \n                  onChange1={handleNameChange} \n                  text2='number'\n                  value2={newNumber}\n                  onChange2={handleNumberChange}\n                  text3='add'\n                  type=\"submit\"\n      />\n      <h3>Numbers</h3>\n      <Persons persons={personToShow}\n              handleRemoveName={handleRemoveName}\n              \n        />\n    </div>\n  )\n}\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App.js'\nimport './index.css'\n\n\nReactDOM.render(\n  <App  />,\n  document.getElementById('root')\n)"],"sourceRoot":""}